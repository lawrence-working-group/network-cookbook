+++
title = "远程配置时防止把自己锁在外面"
date = "2019-12-22"
tags = ["cisco"]
+++

## 适用于 Cisco IOS

在使用 in-band 远程访问思科设备时，很有可能由于规划不当，导致当前的管理会话被安全策略阻挡，而设备本身距离管理站又很远，不方便本地修复。如果远程设备不是特别关键的设备，允许短时间重启的话，可以使用如下方法，在配置失误后，设备重启，回退到保存之前的配置。

1. 在配置开始前，先使用 `write memory` 保存当前配置
2. 估计一下需要配置多久，键入 `reload in <分钟数>` 让系统计划在几分钟后重启。
3. 开始配置。
4. 如果配置失败，等待设备重启。
5. 如果配置成功，保存配置，并键入 `reload cancel` 取消已经计划的重启操作。
